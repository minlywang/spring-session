<!DOCTYPE html>
<html>
<body>

<nav th:fragment="header" class="navbar navbar-default" role="navigation">
    <div class="container-fluid">

        <div class="navbar-header">
            <a class="navbar-brand" href="https://github.com/spring-projects/spring-session/">Spring Session</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a id="navHome" href="/" th:href="@{/}">Home</a>
                </li>
                <li class="active">
                    <a id="navLink" href="/link" th:href="@{/link}">Link</a>
                </li>
            </ul>
            <span th:if="${currentAccount  != null} or !${accounts.empty}">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                            <span th:text="${username}">jlong</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <span th:if="${currentAccount != null}">
                                 <li><a id="logout" th:href="${currentAccount.logoutUrl}">Log Out</a></li>
                                 <li><a id="addAccount" th:href="${addAccountUrl}">Add Account</a></li>
                            </span>
                            <span th:if="!${accounts.empty}">
                                <li class="divider"></li>
                                <li class="dropdown-header">Switch Account</li>
                                <li class="divider"></li>
                            </span>

                            <li th:each="account : ${accounts}">

                                <a th:id="'switchAccount' + ${account.username}" th:href="${account.switchAccountUrl}">
                                    <span th:text="${account.username}"/>
                                </a>
                            </li>


                            <!--

                                     <c:if test="${not empty accounts}">

                                     </c:if>
                                     <c:forEach items="${accounts}" var="account">
                                         <li><a id="switchAccount${account.username}" href="${account.switchAccountUrl}"><c:out value="${account.username}"/></a></li>
                                     </c:forEach>-->
                        </ul>
                    </li>
                </ul>
            </span>
        </div>
        <!--/.nav-collapse -->
    </div>
    <!--/.container-fluid -->
</nav>


</body>
</html>